local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- إزالة أي واجهات سابقة
for _, gui in ipairs(playerGui:GetChildren()) do
    if gui.Name == "LoadingScreen" then
        gui:Destroy()
    end
end

-- إنشاء ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "LoadingScreen"
screenGui.ResetOnSpawn = false
screenGui.DisplayOrder = 999
screenGui.IgnoreGuiInset = true
screenGui.Parent = playerGui

-- خلفية سوداء تغطي كل الشاشة
local bg = Instance.new("Frame")
bg.Size = UDim2.new(1,0,1,0)
bg.BackgroundColor3 = Color3.fromRGB(0,0,0)
bg.BorderSizePixel = 0
bg.Parent = screenGui

-- شريط التقدم الخلفي
local progressBg = Instance.new("Frame")
progressBg.Size = UDim2.new(0.6,0,0,25)
progressBg.Position = UDim2.new(0.2,0,0.7,0)
progressBg.BackgroundColor3 = Color3.fromRGB(50,50,50)
progressBg.Parent = bg

local progressBgCorner = Instance.new("UICorner")
progressBgCorner.CornerRadius = UDim.new(0,12)
progressBgCorner.Parent = progressBg

-- شريط التقدم نفسه
local progressBar = Instance.new("Frame")
progressBar.Size = UDim2.new(0,0,1,0)
progressBar.BackgroundColor3 = Color3.fromRGB(0,255,247)
progressBar.Parent = progressBg

local progressBarCorner = Instance.new("UICorner")
progressBarCorner.CornerRadius = UDim.new(0,12)
progressBarCorner.Parent = progressBar

-- نص العداد أسفل الشريط
local progressText = Instance.new("TextLabel")
progressText.Size = UDim2.new(0,150,0,40)
progressText.Position = UDim2.new(0.5,-75,0.77,0)
progressText.BackgroundTransparency = 1
progressText.TextColor3 = Color3.fromRGB(255,255,255)
progressText.Font = Enum.Font.FredokaOne
progressText.TextScaled = true
progressText.Text = "0%"
progressText.Parent = bg

-- مربع الصورة
local imageBox = Instance.new("Frame")
imageBox.Size = UDim2.new(0,250,0,200)
imageBox.Position = UDim2.new(0,50,0.4,-100)
imageBox.BackgroundColor3 = Color3.fromRGB(30,30,30)
imageBox.Parent = bg

local imageBoxCorner = Instance.new("UICorner")
imageBoxCorner.CornerRadius = UDim.new(0,20)
imageBoxCorner.Parent = imageBox

-- الصورة نفسها داخل المربع
local img = Instance.new("ImageLabel")
img.Size = UDim2.new(0.95,0,0.95,0)
img.Position = UDim2.new(0.025,0,0.025,0)
img.BackgroundTransparency = 1
img.Image = "rbxassetid://87873786120601"
img.Parent = imageBox

local imgCorner = Instance.new("UICorner")
imgCorner.CornerRadius = UDim.new(0,15)
imgCorner.Parent = img

-- Fade-in للصورة
TweenService:Create(img, TweenInfo.new(1), {ImageTransparency=0}):Play()

-- إعداد شريط التحميل
local totalTime = 5
local startTime = tick()

local conn
conn = RunService.RenderStepped:Connect(function()
    local elapsed = tick() - startTime
    local percent = math.clamp(elapsed/totalTime,0,1)
    progressBar.Size = UDim2.new(percent,0,1,0)
    progressText.Text = math.floor(percent*100).."%"

    if percent >= 1 then
        conn:Disconnect()

        -- ظهور كلمة KIRA تدريجيًا
        local kiraText = Instance.new("TextLabel")
        kiraText.Size = UDim2.new(0,200,0,80)
        kiraText.Position = UDim2.new(0.5,-100,0.3,0)
        kiraText.BackgroundTransparency = 1
        kiraText.TextColor3 = Color3.fromRGB(255,0,0)
        kiraText.Font = Enum.Font.FredokaOne
        kiraText.TextScaled = true
        kiraText.Text = "KIRA"
        kiraText.TextTransparency = 1
        kiraText.Parent = bg

        TweenService:Create(kiraText, TweenInfo.new(1), {TextTransparency=0}):Play()

        -- الانتظار ثم إخفاء كل شيء مع الكلمة
        wait(2)
        TweenService:Create(bg, TweenInfo.new(1), {BackgroundTransparency=1}):Play()
        TweenService:Create(kiraText, TweenInfo.new(1), {TextTransparency=1}):Play()
        wait(1)
        screenGui:Destroy()
    end
end)